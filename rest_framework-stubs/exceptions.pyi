from typing import Any, Union, Dict, Optional, Sequence

from django.http import JsonResponse
from rest_framework.renderers import BaseRenderer
from rest_framework.request import Request

_Detail = Union[str, Dict[str, Any]]

class ErrorDetail(str):
    code: Optional[str] = None
    def __new__(cls, string: str, code: Optional[str] = ...): ...

class APIException(Exception):
    status_code: int = ...
    default_detail: str = ...
    default_code: str = ...

    detail: _Detail
    def __init__(self, detail: Optional[_Detail] = ..., code: Optional[str] = ...) -> None: ...
    def get_codes(self) -> Any: ...
    def get_full_details(self) -> Any: ...

class ValidationError(APIException): ...
class ParseError(APIException): ...
class AuthenticationFailed(APIException): ...
class NotAuthenticated(APIException): ...
class PermissionDenied(APIException): ...
class NotFound(APIException): ...

class MethodNotAllowed(APIException):
    def __init__(self, method: str, detail: Optional[_Detail] = ..., code: Optional[str] = ...) -> None: ...

class NotAcceptable(APIException):
    available_renderers: Optional[Sequence[BaseRenderer]]
    def __init__(
        self,
        detail: Optional[_Detail] = ...,
        code: Optional[str] = ...,
        available_renderers: Optional[Sequence[BaseRenderer]] = ...,
    ) -> None: ...

class UnsupportedMediaType(APIException):
    def __init__(self, media_type: str, detail: Optional[_Detail] = ..., code: Optional[str] = ...) -> None: ...

class Throttled(APIException):
    extra_detail_singular: str = ...
    extra_detail_plural: str = ...
    def __init__(self, wait: Optional[float] = ..., detail: Optional[_Detail] = ..., code: Optional[str] = ...): ...

def server_error(request: Request, *args: Any, **kwargs: Any) -> JsonResponse: ...
def bad_request(request: Request, exception: Exception, *args: Any, **kwargs: Any) -> JsonResponse: ...
